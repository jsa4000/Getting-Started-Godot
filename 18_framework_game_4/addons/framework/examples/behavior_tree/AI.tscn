[gd_scene load_steps=24 format=2]

[ext_resource path="res://addons/framework/examples/common/Character.tscn" type="PackedScene" id=1]
[ext_resource path="res://addons/framework/blackboard/BlackboardRepository.gd" type="Script" id=2]
[ext_resource path="res://addons/framework/behavior_tree/BehaviorTree.gd" type="Script" id=3]
[ext_resource path="res://addons/framework/examples/behavior_tree/Initializer.gd" type="Script" id=4]
[ext_resource path="res://addons/framework/behavior_tree/decorators/BehaviorTreeFetcherDecorator.gd" type="Script" id=5]
[ext_resource path="res://addons/framework/behavior_tree/composites/BehaviorTreeStatesComposite.gd" type="Script" id=6]
[ext_resource path="res://addons/framework/behavior_tree/composites/BehaviorTreeSequenceCompositee.gd" type="Script" id=7]
[ext_resource path="res://addons/framework/examples/behavior_tree/Check Modulus Number.gd" type="Script" id=8]
[ext_resource path="res://addons/framework/behavior_tree/decorators/BehaviorTreeStateDecorator.gd" type="Script" id=9]
[ext_resource path="res://addons/framework/examples/behavior_tree/Move to Destination.gd" type="Script" id=10]
[ext_resource path="res://addons/framework/examples/behavior_tree/LookAt Target.gd" type="Script" id=11]
[ext_resource path="res://addons/framework/examples/behavior_tree/Check Target on Area.gd" type="Script" id=12]
[ext_resource path="res://addons/framework/examples/behavior_tree/Check on Destination.gd" type="Script" id=13]
[ext_resource path="res://addons/framework/examples/behavior_tree/Increase Counter.gd" type="Script" id=14]
[ext_resource path="res://addons/framework/examples/behavior_tree/Emit Particles.gd" type="Script" id=15]
[ext_resource path="res://addons/framework/examples/behavior_tree/Select Next Destination.gd" type="Script" id=16]
[ext_resource path="res://addons/framework/examples/behavior_tree/Sleep and Wait.gd" type="Script" id=17]
[ext_resource path="res://addons/framework/examples/behavior_tree/Reset Counter.gd" type="Script" id=18]

[sub_resource type="Gradient" id=1]
offsets = PackedFloat32Array( 0, 0.995316 )
colors = PackedColorArray( 1, 1, 1, 1, 1, 1, 1, 0 )

[sub_resource type="GradientTexture" id=2]
gradient = SubResource( 1 )

[sub_resource type="ParticlesMaterial" id=3]
emission_shape = 2
emission_box_extents = Vector3( 1, 1, 1 )
gravity = Vector3( 0, 5, 0 )
color_ramp = SubResource( 2 )

[sub_resource type="StandardMaterial3D" id=4]
transparency = 1
vertex_color_use_as_albedo = true
billboard_mode = 3
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false

[sub_resource type="QuadMesh" id=5]
material = SubResource( 4 )

[node name="Character" instance=ExtResource( 1 )]

[node name="Initializer" type="Node" parent="." index="2"]
script = ExtResource( 4 )
behavior_tree = NodePath("../BehaviorTree")

[node name="BlackboardRepository" type="Node" parent="." index="3"]
script = ExtResource( 2 )
data = {
"dummy": "dummy",
"particles": NodePath("../Particles")
}

[node name="BehaviorTree" type="Node" parent="." index="4"]
script = ExtResource( 3 )
actor_path = NodePath("..")
data = {
"dummy": "dummy"
}

[node name="FetchData" type="Node" parent="BehaviorTree" index="0"]
script = ExtResource( 5 )
data = {
"dummy": "dummy",
"particles": NodePath("../../Particles")
}

[node name="States" type="Node" parent="BehaviorTree/FetchData" index="0"]
script = ExtResource( 6 )

[node name="Alert" type="Node" parent="BehaviorTree/FetchData/States" index="0"]
script = ExtResource( 9 )
state_name = "Alert"
start = true
transition_states = [  ]

[node name="Target On View" type="Node" parent="BehaviorTree/FetchData/States/Alert" index="0"]
script = ExtResource( 7 )

[node name="Check Target On Area" type="Node" parent="BehaviorTree/FetchData/States/Alert/Target On View" index="0"]
script = ExtResource( 12 )
distance = 6.0

[node name="LookAt Target" type="Node" parent="BehaviorTree/FetchData/States/Alert/Target On View" index="1"]
script = ExtResource( 11 )
offset = Vector3( 0, 1, 0 )

[node name="Searching" type="Node" parent="BehaviorTree/FetchData/States" index="1"]
script = ExtResource( 9 )
state_name = "Searching"
transition_states = [  ]

[node name="On DestinationPoint" type="Node" parent="BehaviorTree/FetchData/States/Searching" index="0"]
script = ExtResource( 7 )

[node name="Check On Destination" type="Node" parent="BehaviorTree/FetchData/States/Searching/On DestinationPoint" index="0"]
script = ExtResource( 13 )

[node name="Select Next Destination" type="Node" parent="BehaviorTree/FetchData/States/Searching/On DestinationPoint" index="1"]
script = ExtResource( 16 )

[node name="Increase Counter" type="Node" parent="BehaviorTree/FetchData/States/Searching/On DestinationPoint" index="2"]
script = ExtResource( 14 )

[node name="Resting" type="Node" parent="BehaviorTree/FetchData/States" index="2"]
script = ExtResource( 9 )
state_name = "Resting"
transition_states = [ NodePath("../Searching"), NodePath("."), NodePath("../Moving") ]

[node name="Waiting For Resting" type="Node" parent="BehaviorTree/FetchData/States/Resting" index="0"]
script = ExtResource( 7 )

[node name="Check Modulus Number" type="Node" parent="BehaviorTree/FetchData/States/Resting/Waiting For Resting" index="0"]
script = ExtResource( 8 )
modulus = 5

[node name="Start Emitting Particles" type="Node" parent="BehaviorTree/FetchData/States/Resting/Waiting For Resting" index="1"]
script = ExtResource( 15 )

[node name="Sleep And Wait" type="Node" parent="BehaviorTree/FetchData/States/Resting/Waiting For Resting" index="2"]
script = ExtResource( 17 )
milliseconds = 10000

[node name="Stop Emitting Particles" type="Node" parent="BehaviorTree/FetchData/States/Resting/Waiting For Resting" index="3"]
script = ExtResource( 15 )
emitting = false

[node name="Reset Counter" type="Node" parent="BehaviorTree/FetchData/States/Resting/Waiting For Resting" index="4"]
script = ExtResource( 18 )

[node name="Moving" type="Node" parent="BehaviorTree/FetchData/States" index="3"]
script = ExtResource( 9 )
state_name = "Moving"
transition_states = [  ]

[node name="Move To Destination" type="Node" parent="BehaviorTree/FetchData/States/Moving" index="0"]
script = ExtResource( 7 )

[node name="LookAt Target" type="Node" parent="BehaviorTree/FetchData/States/Moving/Move To Destination" index="0"]
script = ExtResource( 11 )
target = "destination"
wait = true

[node name="Move To Destination" type="Node" parent="BehaviorTree/FetchData/States/Moving/Move To Destination" index="1"]
script = ExtResource( 10 )

[node name="Particles" type="GPUParticles3D" parent="." index="5"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.07279, 0 )
emitting = false
process_material = SubResource( 3 )
draw_pass_1 = SubResource( 5 )
script = null
